<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>nossl.sh — quick connection check</title>
  <meta name="description" content="Compact connection dashboard: online status, protocol, IP, time, ping, headers." />
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
<header class="topbar" role="banner">
  <div class="status">
    <span class="dot" id="online-dot" aria-hidden="true"></span>
    <strong id="online-text">You're online</strong>
    <span class="pill" id="scheme-pill"><%= scheme ? scheme.toUpperCase() : 'HTTP' %></span>
  </div>

  <!-- logo on the right -->
  <div class="logo" aria-label="nossl.sh">
    <span class="wordmark">nossl.sh</span>
  </div>
</header>

<main class="wrap" role="main">
  <section class="grid kpis" aria-label="Summary">
    <article class="card">
      <h2>Status</h2>
      <dl class="kv">
        <dt>Connection</dt><dd id="conn-type">—</dd>
        <dt>IP</dt>
        <dd>
          <code id="ip"><%= clientIp %></code>
          <button class="copy" data-copy="<%= clientIp %>" aria-label="Copy IP">copy</button>
        </dd>
        <dt>HTTP version</dt><dd><code><%= httpVersion %></code></dd>
        <dt>Ping</dt><dd id="ping">—</dd>
      </dl>
    </article>

    <article class="card">
      <h2>Time</h2>
      <dl class="kv">
        <dt>Local</dt><dd id="local-time">—</dd>
        <dt>UTC</dt><dd id="utc-time">—</dd>
        <dt>Timezone</dt><dd id="tz">—</dd>
      </dl>
    </article>

    <article class="card">
      <h2>Network</h2>
      <dl class="kv">
        <dt>Protocol</dt><dd><code id="proto"><%= scheme %></code></dd>
        <dt>Effective type</dt><dd id="eff-type">—</dd>
        <dt>Downlink</dt><dd id="downlink">—</dd>
        <dt>RTT (browser)</dt><dd id="rtt">—</dd>
      </dl>
    </article>

    <article class="card">
      <h2>Client</h2>
      <dl class="kv">
        <dt>User‑Agent</dt><dd class="truncate"><code><%= headers['user-agent'] %></code></dd>
        <dt>Accept‑Language</dt><dd><code><%= headers['accept-language'] %></code></dd>
      </dl>
    </article>
  </section>

  <section class="card">
    <details open>
      <summary>Request headers</summary>
      <div class="table-wrap">
        <table class="kv-table" id="headers-table">
          <thead><tr><th>Header</th><th>Value</th></tr></thead>
          <tbody>
          <% Object.keys(headers).sort().forEach(function(k){ %>
            <tr>
              <td><code><%= k %></code></td>
              <td class="wrap"><code><%= headers[k] %></code></td>
            </tr>
          <% }) %>
          </tbody>
        </table>
      </div>
    </details>
  </section>

  <!-- Future blocks you plan (kept empty/hidden for now) -->
  <section class="grid future" hidden>
    <article class="card">
      <h2>GeoIP</h2>
      <dl class="kv">
        <dt>Country</dt><dd id="geo-country">—</dd>
        <dt>Region</dt><dd id="geo-region">—</dd>
        <dt>City</dt><dd id="geo-city">—</dd>
        <dt>ASN / ISP</dt><dd id="geo-asn">—</dd>
      </dl>
    </article>
    <article class="card">
      <h2>Speed</h2>
      <dl class="kv">
        <dt>Download</dt><dd id="speed-down">—</dd>
        <dt>Upload</dt><dd id="speed-up">—</dd>
      </dl>
    </article>
  </section>
</main>

<script>window.__REQUEST__ = <%- JSON.stringify({ clientIp, scheme, httpVersion, headers }) %>;</script>
<script src="/static/app.js" defer></script>
</body>
</html>
